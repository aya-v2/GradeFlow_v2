{% extends "base.html.twig" %}

{% block title %}Tableau de Bord Admin{% endblock %}

{% block body %}
    {% include 'components/sidebar.html.twig' %}

    <main class="min-h-screen p-8 bg-white flex-1 overflow-y-auto">
        <div class="max-w-7xl mx-auto">
            <div class="mb-8">
                <h1 class="text-3xl font-bold text-gray-900">Tableau de Bord Administrateur</h1>
                <p class="text-gray-500 mt-2">Bonjour, <span class="font-bold text-indigo-600">{{ app.user.firstName }} {{ app.user.lastName }}</span>. Voici un aperçu de l'établissement.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Utilisateurs Total</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ stats.users_total }}</p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Étudiants</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ stats.students }}</p>
                        </div>
                        <div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-indigo-600" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Enseignants</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ stats.teachers }}</p>
                        </div>
                        <div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-green-600" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Administrateurs</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ stats.admins }}</p>
                        </div>
                        <div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-red-600" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Classes</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ stats.classes_total }}</p>
                        </div>
                        <div class="w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-amber-600" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10.496 2.132a1 1 0 00-.992 0l-7 4A1 1 0 003 8v7a1 1 0 100 2h14a1 1 0 100-2V8a1 1 0 00.496-1.868l-7-4zM6 9a1 1 0 00-1 1v3a1 1 0 102 0v-3a1 1 0 00-1-1zm3 1a1 1 0 012 0v3a1 1 0 11-2 0v-3zm5-1a1 1 0 00-1 1v3a1 1 0 102 0v-3a1 1 0 00-1-1z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Modules</p>
                            <p class="text-3xl font-bold text-gray-900 mt-2">{{ stats.modules_total }}</p>
                        </div>
                        <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-purple-600" viewBox="0 0 20 20" fill="currentColor">
                                <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z" />
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                    <div class="flex items-start justify-between">
                        <div>
                            <p class="text-sm text-gray-600 font-medium">Année Actuelle</p>
                            <p class="text-lg font-bold text-gray-900 mt-2">
                                {% if stats.current_year %}
                                    {{ stats.current_year.name }}
                                {% else %}
                                    Aucune
                                {% endif %}
                            </p>
                        </div>
                        <div class="w-12 h-12 bg-cyan-100 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-cyan-600" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6">
                <h2 class="text-xl font-bold text-gray-900 mb-6">Actions Rapides</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    
                    <a href="{{ path('app_admin_user_new') }}" class="p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">+ Nouvel Utilisateur</p>
                                <p class="text-sm text-gray-500 mt-1">Ajouter étudiant, prof ou admin</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-300 group-hover:text-indigo-600 transition-colors" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </a>

                    <a href="{{ path('app_admin_classe_new') }}" class="p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">+ Nouvelle Classe</p>
                                <p class="text-sm text-gray-500 mt-1">Créer une classe pour cette année</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-300 group-hover:text-indigo-600 transition-colors" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </a>

                    <a href="{{ path('app_admin_module_new') }}" class="p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">+ Nouveau Module</p>
                                <p class="text-sm text-gray-500 mt-1">Créer un module pour une filière</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-300 group-hover:text-indigo-600 transition-colors" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </a>

                    <a href="{{ path('app_admin_assignment_new') }}" class="p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">+ Affecter Enseignant</p>
                                <p class="text-sm text-gray-500 mt-1">Lier enseignant à une classe</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-300 group-hover:text-indigo-600 transition-colors" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </a>

                    <a href="{{ path('app_admin_users') }}" class="p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">Gérer Utilisateurs</p>
                                <p class="text-sm text-gray-500 mt-1">Voir, modifier ou supprimer</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-300 group-hover:text-indigo-600 transition-colors" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </a>

                    <a href="{{ path('app_admin_system') }}" class="p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition group">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="font-semibold text-gray-900 group-hover:text-indigo-600 transition-colors">Système & Archives</p>
                                <p class="text-sm text-gray-500 mt-1">Année scolaire et paramètres</p>
                            </div>
                            <svg class="w-5 h-5 text-gray-300 group-hover:text-indigo-600 transition-colors" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                            </svg>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </main>

    {% include 'components/sidebar_close.html.twig' %}
{% endblock %}